/**
 * Chooses which user factory to use based on their type.
 */